[gd_scene load_steps=19 format=3 uid="uid://dj3s5sndljpr1"]

[ext_resource type="Script" path="res://Scripts/TestH.cs" id="1_ulebq"]
[ext_resource type="Texture2D" uid="uid://cr2lb354w36mv" path="res://Sprites/TestH/chara.png" id="2_me2tq"]
[ext_resource type="Resource" uid="uid://cole6tiatpmnm" path="res://Resources/UnitStats/TestH.tres" id="2_o08ap"]
[ext_resource type="PackedScene" uid="uid://crbruay2rfa3p" path="res://Prefabs/Effects/PopupEffect.tscn" id="3_nihf5"]
[ext_resource type="Script" path="res://Scripts/Movement.cs" id="3_or2d2"]
[ext_resource type="Material" uid="uid://dcqwr42e1ky5v" path="res://Resources/Material/FlashMat.tres" id="3_wwgct"]
[ext_resource type="Script" path="res://Scripts/PlayerStateController.cs" id="4_d4ftl"]
[ext_resource type="Script" path="res://Scripts/PlayerAnimation.cs" id="5_2gvfl"]
[ext_resource type="PackedScene" uid="uid://e5ccxwf8ehw1" path="res://Components/unit_health.tscn" id="7_lwkil"]
[ext_resource type="Script" path="res://Scripts/AbilityHolder.cs" id="8_oqssg"]
[ext_resource type="Resource" uid="uid://mntob2ltyay2" path="res://Resources/Abilities/Fireball.tres" id="9_hfxfa"]

[sub_resource type="Animation" id="Animation_ag8rn"]
resource_name = "Appear"
length = 0.075
step = 0.01
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0150661, 0.0305428, 0.0457942, 0.0603648),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 1,
"values": [5, 4, 3, 2, 1]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("PlayerStateController")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.05),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"ReturnToIdle"
}]
}

[sub_resource type="Animation" id="Animation_x1oty"]
resource_name = "Attack"
length = 0.2
step = 0.01
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [7]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("PlayerStateController")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.15),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"ReturnToIdle"
}]
}

[sub_resource type="Animation" id="Animation_2xqjy"]
resource_name = "Damage"

[sub_resource type="Animation" id="Animation_sah67"]
resource_name = "idle"
length = 0.15
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.000118002),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}

[sub_resource type="Animation" id="Animation_4eiip"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_h1245"]
resource_name = "Vanish"
length = 0.075
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0157927, 0.030443, 0.0465438, 0.0597431, 0.0746189),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 0, 2, 3, 4, 5]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_enmrb"]
_data = {
"Appear": SubResource("Animation_ag8rn"),
"Attack": SubResource("Animation_x1oty"),
"Damage": SubResource("Animation_2xqjy"),
"Idle": SubResource("Animation_sah67"),
"RESET": SubResource("Animation_4eiip"),
"Vanish": SubResource("Animation_h1245")
}

[node name="TestH" type="CharacterBody2D" node_paths=PackedStringArray("playerAnim", "stateController", "PopupPoint")]
script = ExtResource("1_ulebq")
playerAnim = NodePath("PlayerAnimation")
stateController = NodePath("PlayerStateController")
stats = ExtResource("2_o08ap")
PopupPrefab = ExtResource("3_nihf5")
PopupPoint = NodePath("PopupPoint")

[node name="Sprite2D" type="Sprite2D" parent="."]
material = ExtResource("3_wwgct")
position = Vector2(8, -78)
scale = Vector2(2, 2)
texture = ExtResource("2_me2tq")
hframes = 8

[node name="Movement" type="Node2D" parent="." node_paths=PackedStringArray("currentUnit")]
process_mode = 4
position = Vector2(49, -218)
script = ExtResource("3_or2d2")
currentUnit = NodePath("..")
cooldown = 0.1

[node name="PlayerStateController" type="Node2D" parent="."]
script = ExtResource("4_d4ftl")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_enmrb")
}

[node name="PlayerAnimation" type="Node" parent="." node_paths=PackedStringArray("animPlayer")]
script = ExtResource("5_2gvfl")
animPlayer = NodePath("../AnimationPlayer")

[node name="UnitHealth" parent="." node_paths=PackedStringArray("spriteAnim") instance=ExtResource("7_lwkil")]
maxHP = 500
spriteAnim = NodePath("../AnimationPlayer")

[node name="FiringPoint" type="Node2D" parent="."]
position = Vector2(63, -93)

[node name="AbilityHolder1" type="Node" parent="." node_paths=PackedStringArray("user", "stateCon")]
script = ExtResource("8_oqssg")
ability = ExtResource("9_hfxfa")
user = NodePath("..")
stateCon = NodePath("../PlayerStateController")
numberOfCharges = 5

[node name="AbilityHolder2" type="Node" parent="." node_paths=PackedStringArray("user", "stateCon")]
script = ExtResource("8_oqssg")
ability = ExtResource("9_hfxfa")
user = NodePath("..")
slotNumber = 1
stateCon = NodePath("../PlayerStateController")
numberOfCharges = 6

[node name="AbilityHolder3" type="Node" parent="." node_paths=PackedStringArray("user", "stateCon")]
script = ExtResource("8_oqssg")
ability = ExtResource("9_hfxfa")
user = NodePath("..")
slotNumber = 2
stateCon = NodePath("../PlayerStateController")
numberOfCharges = 7

[node name="PopupPoint" type="Marker2D" parent="."]
position = Vector2(-5, -155)
